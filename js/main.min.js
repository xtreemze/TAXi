var stopped=true;var loaded=false;var wait=false;var alive=true;var health=100;var wealth=800;var food=4;var currentDate=new Date(2009,4,11,7);var day=1;var Step=18;var sound=new Howl({urls:["aud/sounds.ogg"],honk:[2180,1220],eat:[6540,2570],sleep:[10900,4360],cash:[4360,680],stop:[26720,2180],wrong:[29450,410],zoom:[32720,1640],jump:[34900,130],leave:[33270,1090],start:[37090,2180],drive:[17450,4360,{loop:true}]});var GoTaxi=function goT(){if(stopped===true){$(".taxi").removeClass("stop").stop().addClass("drive")}stopped=false;$(".background2").stop().animate({right:"-="+parseInt(225000/2.01,10)},1000000,"linear");var b=[".storeCube",".officeCube"];for(var a=b.length-1;a>=0;a--){if(parseInt($(b[a]).css("right"),10)<-1500){$(b[a]).stop().css("right",Math.ceil((Math.random()+Math.random())*20)*300+2400+"px")}}cubeMove("-="+20000*1.17+"px",100000);goLive();sound.stop().play("start").play("drive")};var stopTaxi=function stopping(){$(".taxi").removeClass("drive").stop().addClass("stop");if(stopped===false){$(".background2").stop(true).animate({right:"-="+parseInt(112.5/2.01,10)},500,"linear");$(".rider").stop().fadeIn(0).animate({right:"-=100px"},{duration:500,queue:false,easing:"linear"});$(".cubes").stop(true);cubeMove("-="+100*1.17+"px",500);stopped=true;sound.stop().stop().play("stop")}if(stopped===true&&loaded===false&&parseInt($(".storeCube").css("right"),10)>5&&parseInt($(".storeCube").css("right"),10)<480&&wealth>200&&food<15){$(".transaction").html("<span class='red'>L.200</span>").fadeIn().delay(200).fadeOut();food++;food++;wealth-=200;sound.play("cash").play("eat");setTimeout(function(){$(".transaction").html("<span class='black'>L."+wealth+"</span>").fadeIn().delay(200).fadeOut()},1600)}else{if(wealth<200){}else{if(food>14){}}}};var cubeMove=function(b,a){$(".cubes").animate({right:b},a,"linear")};var blackOut=function Bo(){$(".con2").fadeOut(200)};var showTime=function Sho(){$(".con2").fadeIn(300)};var message="<span class='black'>Day "+day+"</span><br><span style='font-size:20px'><br><br><br>Food for "+food+" days. <span class='red'>You died!</span><span>";var taxiDie=function Die(){$(".transaction").html(message).delay(20).fadeIn().delay(8000).fadeOut()};var loop=function looping(){setInterval(function a(){if(stopped===false){addMinutes(Step)}},1000)};var report=function inform(){$(".transaction").html("<span class='black'>Day "+day+"</span><br><span>"+currentDate.getHours()+" hours.</span><p class='subInfo'>Food: "+food+" days. <span class='red'>Cash: L."+wealth+"</span><p>").delay(20).fadeIn().delay(8000).fadeOut()};var nextDay=function passTime(c){if(currentDate.getHours()>14&&alive===true){blackOut();stopTaxi();currentDate.setDate(currentDate.getDate()+c);currentDate.setHours(7);sound.play("sleep");food-=0.5;wealth-=100;health=99;day=day+1;$(".taxiFull").fadeOut(0);loaded=false;$(".background2").css("right","-60px");setTimeout(function a(){showTime();report()},3000)}else{if(currentDate.getHours()===11&&alive===true){stopTaxi();$(".transaction").html("<span class='red'>Almuerzo</span>").delay(2).fadeIn().delay(1800).fadeOut();sound.play("eat");addMinutes(60);food-=0.5;$(".taxiFull").fadeOut(300);loaded=false;setTimeout(function b(){showTime();report()},3500)}}};function hideMenu(a){a.preventDefault()}showTime();sound.play("sleep");var check=function(){if(health<1||food<1||wealth<1){alive=false;health=0}if(alive===false){for(Step===18;Step>0;Step=Step-18){if(health<1){}if(food<1){}taxiDie()}}};var addMinutes=function timePlus(a){currentDate.setMinutes(currentDate.getMinutes()+a);nextDay(1);check()};var passengerClick=function(){var b=parseInt(parseInt($(this).css("right"),10)*1.1-50,10);if(loaded===false&&alive===true&&wait===false&&b<1300){wait=true;if(stopped===false){stopTaxi()}sound.play("zoom");$(this).animate({bottom:"+=20px"},{duration:110}).animate({bottom:"-=20px"},{duration:100}).animate({bottom:"+=16px"},{duration:150}).animate({bottom:"-=16px"},{duration:100});$(this).animate({right:"50px"},{duration:b}).animate({bottom:"-=15px"},{duration:200}).fadeOut().animate({bottom:"+=15px"},{duration:1}).animate({right:"-200px"},{duration:1});$(".taxiFull").delay(b+780).fadeIn();setTimeout(function a(){wait=false;loaded=true;sound.play("door")},b+800)}else{if(loaded===true&&alive===true){if(stopped===true){$(this).animate({bottom:"+=20px"},{duration:110}).animate({bottom:"-=20px"},{duration:100})}else{$(this).stop().animate({bottom:"110px",right:"-=23"},{duration:110,easing:"linear"}).animate({bottom:"90px",right:"-=22"},{duration:100,easing:"linear"}).animate({right:"-=20000px"},{duration:100000,easing:"linear"})}sound.play("jump").play("wrong")}else{if(loaded===false&&alive===true&&wait===false){if(stopped===false){$(this).stop().animate({bottom:"+=20px",right:"-=23"},{duration:110,easing:"linear"}).animate({bottom:"-=20px",right:"-=22"},{duration:100,easing:"linear"}).animate({right:"-=20000px"},{duration:100000,easing:"linear"})}else{$(this).animate({bottom:"+=20px"},{duration:110,easing:"linear"}).animate({bottom:"-=20px"},{duration:100,easing:"linear"})}sound.play("wrong")}}}};$(".rider").mousedown(passengerClick);var taxiClick=function(){if(wait===true){sound.play("wrong")}if(stopped===true&&wait===false&&alive===true){GoTaxi()}else{if(loaded===true&&stopped===false&&wait===false&&alive===true){wait=true;stopTaxi();$(".taxiFull").fadeOut();sound.play("cash");setTimeout(function b(){loaded=false;wealth+=70;$(".transaction").html("<span class='green'>L.70</span>").fadeIn().delay(200).fadeOut();setTimeout(function c(){$(".transaction").html("<span class='black'>L."+wealth+"</span>").fadeIn().delay(200).fadeOut()},1600);wait=false;$(".passengerDrop").fadeOut(0).delay(200).css("right","50px").css("bottom","-=15px").fadeIn().animate({bottom:"+=15px"},{duration:200}).animate({right:"-=400px"},{duration:800}).stop();sound.play("door")},600);setTimeout(function a(){sound.play("leave")},1200)}else{if(stopped===false&&wait===false&&alive===true){stopTaxi()}}}};$(".taxi").mousedown(taxiClick);var goLive=function live(){for(var a=5;a>=0;a--){if(parseInt($(".passenger"+[a]).css("right"),10)>-100&&stopped===false){$(".passenger"+[a]).animate({right:"-=20000px"},{duration:100000,easing:"linear"})}else{if(stopped===false){$(".passenger"+[a]).css("right",Math.ceil(Math.random()*100)*50+1800+"px").fadeIn(0).animate({right:"-=20000px"},{duration:100000,easing:"linear"})}}}};$(".taxiFull").fadeOut(1);$(".passengerDrop").fadeOut(1);report();loop();